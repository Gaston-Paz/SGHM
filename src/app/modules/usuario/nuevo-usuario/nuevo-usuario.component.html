<div class="container mt-2">
    <div class="card">
        <mat-card>
            <mat-card-header>
                <mat-card-title>Nuevo Usuario</mat-card-title>
              </mat-card-header>

              <mat-card-content>
                <form [formGroup]="form">
                    <div class="row w-100">
                        <mat-form-field appearance="outline" class="example-full-width">
                            <mat-label>Nombre</mat-label>
                            <input
                              type="text"
                              matInput
                              formControlName="nombre"
                              placeholder="Nombre del usuario"
                              required="true"
                              autocomplete="off"
                            />
                            <mat-error *ngIf="form.controls.nombre.hasError('required')">
                              Nombre es <strong>obligatorio</strong>
                            </mat-error>
                          </mat-form-field>

                          <mat-form-field appearance="outline" class="example-full-width">
                            <mat-label>Apellido</mat-label>
                            <input
                              type="text"
                              matInput
                              formControlName="apellido"
                              placeholder="Apellido del usuario"
                              required="true"
                              autocomplete="off"
                            />
                            <mat-error *ngIf="form.controls.apellido.hasError('required')">
                              Apellido es <strong>obligatorio</strong>
                            </mat-error>
                          </mat-form-field>

                          <mat-form-field appearance="outline" class="example-full-width">
                            <mat-label>Email</mat-label>
                            <input
                              type="email"
                              matInput
                              formControlName="mail"
                              placeholder="E-mail el usuario"
                              required="true"
                              autocomplete="off"
                            />
                            <mat-error *ngIf="form.controls.mail.hasError('required')">
                              Email es <strong>obligatorio</strong>
                            </mat-error>
                            <mat-error *ngIf="form.controls.mail.hasError('email')">
                                El formato del Email es <strong>incorrecto</strong>
                              </mat-error>
                          </mat-form-field>

                          <mat-form-field appearance="outline" class="example-full-width">
                            <mat-label>Rol</mat-label>
                            <mat-select formControlName="rol" required>
                              <mat-option
                                *ngFor="let rol of roles"
                                [value]="rol"
                              >
                                {{ rol }} 
                              </mat-option>
                            </mat-select>
                            <mat-error *ngIf="form.controls.rol.hasError('required')">
                              El Rol es <strong>obligatorio</strong>
                            </mat-error>
                          </mat-form-field>

                          <mat-form-field appearance="outline" class="example-full-width">
                            <mat-label>Contrase単a</mat-label>
                            <input
                              type="password"
                              matInput
                              formControlName="password"
                              required="true"
                              autocomplete="off"
                              (change)="CheckConfirmPassword()"
                            />
                            <mat-error *ngIf="form.controls.password.hasError('required')">
                              Contrase単a es <strong>obligatorio</strong>
                            </mat-error>
                          </mat-form-field>

                          <mat-form-field appearance="outline" class="example-full-width">
                            <mat-label>Confirmar Contrase単a</mat-label>
                            <input
                              type="password"
                              matInput
                              formControlName="confirmar"
                              required="true"
                              autocomplete="off"
                              (change)="CheckConfirmPassword()"
                            />
                        </mat-form-field>
                        
                        
                    </div>
                    <mat-error *ngIf="diferentes">
                      Las contrase単as <strong>no coinciden</strong>
                    </mat-error>
                </form>
              </mat-card-content>

              <mat-card-actions align="end">
                <button [disabled]="!form.valid || diferentes" (click)="GuardarUsuario()" [ngClass]="form.valid ? 'button' : 'button-disabled' " mat-button>Guardar</button>
              </mat-card-actions>
        </mat-card>
    </div>
</div>

<ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "large" color = "#60c76e" type = "ball-atom" [fullScreen] = "true"><p style="color: white" > Cargando... </p></ngx-spinner>
